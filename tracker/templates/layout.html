<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">
        <link rel="icon" href="{{ static_url('favicon.ico') }}">

        <title>Tracker</title>

        <!-- Bootstrap core CSS -->
        <link href="{{ static_url('dist/css/bootstrap.min.css') }}" rel="stylesheet">

        <!--
        <script src="{{ static_url('dist/js/bootstrap.min.js') }}"></script>
        <script src="{{ static_url('assets/js/vendor/jquery-slim.min.js') }}"></script>
        //-->

        <!-- Custom styles for this template -->
        <link href="{{ static_url('starter-template.css') }}" rel="stylesheet">
        <link rel="stylesheet" href="{{ static_url('loader.css') }}">
        <link rel="stylesheet" href="{{ static_url('custom_tracker.css') }}">
    </head>

    <body style="padding-top: 56px;" class="bg-light">
        <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
            <a class="navbar-brand" style="color:#32c4d1; font-weight: 700;" href="{{ reverse_url('home') }}">TRACKER</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar1" aria-controls="navbar1" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbar1">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
                    </li>
                    {% if hasattr(handler, 'session') and handler.session != {} %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects</a>
                        <div class="dropdown-menu" aria-labelledby="dropdown01">
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/project_create">Create</a>
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/projects_manage">Manage</a>
                        </div>
                    </li>
                    {% end %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">User</a>
                        <div class="dropdown-menu" aria-labelledby="dropdown01">
                            <a class="dropdown-item" href="{{ reverse_url('login') }}">Login</a>
                            <a class="dropdown-item" href="{{ reverse_url('logout') }}">Logout</a>
                            <a class="dropdown-item" href="{{ reverse_url('register') }}">Register</a>
                        </div>
                    </li>
                    {% if 'units' in handler.session %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="dropdown01" data-toggle="dropdown" href="#" aria-haspopup="true" aria-expanded="false">{{ handler.session['current_project'] }}</a>
                        <div class="dropdown-menu" aria-labelledby="dropdown01">
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/projects/{{ handler.session['current_project'] }}/websites-manage">Websites</a>
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/projects/{{ handler.session['current_project'] }}/crawl">Crawler</a>
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/projects/{{ handler.session['current_project'] }}/download">Downloader</a>
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/projects/{{ handler.session['current_project'] }}/content">Content</a>
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/projects/{{ handler.session['current_project'] }}/alerts">Alert</a>
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/projects/{{ handler.session['current_project'] }}/alerts/live/view">Live View</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="dropdown01" data-toggle="dropdown" href="#" aria-haspopup="true" aria-expanded="false">Queues/Tasks</a>
                        <div class="dropdown-menu" aria-labelledby="dropdown01">
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/projects/{{ handler.session['current_project'] }}/tasks/revoke-all">Revoke all tasks</a>
                            <a class="dropdown-item" href="/api/v1/users/{{ handler.session['username'] }}/projects/{{ handler.session['current_project'] }}/tasks/delete-all">Delete all queues</a>
                        </div>
                    </li>
                    {% end %}
                </ul>
                <form class="form-inline my-2 my-lg-0">
                  <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
                  <button class="btn btn-outline-info my-2 my-sm-0" type="submit">Search</button>
                </form>
            </div>
        </nav>
        {% if hasattr(handler, 'session') and handler.session != {} and handler.session['is_admin'] is True %}

        <nav class="navbar navbar-expand-md bg-white box-shadow py-0 custom-toggler" style="padding-top: 15px;">
            <a class="navbar-brand" onmouseover="this.style.color='#28a8b3'" onmouseout="this.style.color='#28a8b3'" style="font-size:0.9rem; color:#28a8b3;" href="#">Admin section</a>
            <button class="navbar-toggler custom-toggler" type="button" data-toggle="collapse" data-target="#navbar2" aria-controls="navbar2" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbar2">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link disabled" style="font-size:0.9rem;" onmouseover="this.style.color='#28a8b3'" onmouseout="this.style.color=''" href="{{ reverse_url('users_list') }}">Users<span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item" onmouseover="this.style.color='#28a8b3'" onmouseout="this.style.color=''">
                        <a class="nav-link disabled" style="font-size:0.9rem;" href="#">Data</a>
                    </li>
                    <li class="nav-item" onmouseover="this.style.color='#28a8b3'" onmouseout="this.style.color=''">
                        <a class="nav-link disabled" style="font-size:0.9rem;" href="#">Network</a>
                    </li>
                    <li class="nav-item" onmouseover="this.style.color='#28a8b3'" onmouseout="this.style.color=''">
                        <a class="nav-link disabled" style="font-size:0.9rem;" href="#">Tasks</a>
                    </li>
                </ul>
            </div>
        </nav>

        {% end %}
        
        {% if hasattr(handler, 'flash') %}
        <div class="alert alert-{{ handler.flash['type']Â }} py-0" role="alert">
            {{ handler.flash['message'] }}
        </div>
        {% end %}

        {% if hasattr(handler, 'session') %}

        {% end %}


        <main role="main" class="container-fluid">
        {% block content %}{% end %}

        </main>

            <script>window.jQuery || document.write('<script src="{{ static_url('assets/js/vendor/jquery-slim.min.js') }}"><\/script>')</script>
            <script src="{{ static_url('assets/js/vendor/popper.min.js') }}"></script>
            <script src="{{ static_url('dist/js/bootstrap.min.js') }}"></script>
            <script>
              $('.dropdown-item').click(function(){
                 $('<div class="loading">Loading&#8230;</div>').prependTo(document.body);
              });
            </script>
            {% block script %}{% end %}
    </body>
</html>